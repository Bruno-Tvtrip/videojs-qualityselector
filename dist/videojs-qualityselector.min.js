/**
 * videojs-qualityselector
 * @version 0.0.5
 * @copyright 2018 Emmanuel Alves <manel.pb@gmail.com>
 * @license MIT
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojsQualityselector=e()}}(function(){return function(){function e(t,n,o){function r(i,l){if(!n[i]){if(!t[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){return r(t[i][1][e]||e)},c,c.exports,e,t,n,o)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}return e}()({1:[function(e,t,n){(function(e){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,i=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(){function e(t){o(this,e),this.player=t,this.sources=[],this.callback=void 0,this.defaultFormat=void 0,this.containerDropdownElement=void 0,this.defaults={}}return r(e,[{key:"onQualitySelect",value:function(e){var t=this;this.callback&&this.callback(e),this.setPlayerSource(e.code)&&(this.player.on("loadedmetadata",function(){t.player.play(),Array.from(t.containerDropdownElement.firstChild.childNodes).forEach(function(t){t.dataset.code===e.code?t.setAttribute("class","current"):t.removeAttribute("class")})}),this.changeQualitySelectorLabel(e.name)),this.onToggleDropdown()}},{key:"setPlayerSource",value:function(e){if(this.sources){var t=this.sources.find(function(t){return t.format===e});if(t)return this.player.src({src:t.src,type:t.type}),t}}},{key:"changeQualitySelectorLabel",value:function(e){var t=document.getElementById(this.player.id_),n=t.getElementsByClassName("vjs-brand-quality-link");n&&n.length>0&&(n[0].innerText=e)}},{key:"onToggleDropdown",value:function(){if(-1===this.containerDropdownElement.className.indexOf("show"))this.containerDropdownElement.className+=" show";else{var e=this.containerDropdownElement.className.replace(" show","");this.containerDropdownElement.className=e}}},{key:"onPlayerReady",value:function(e){var t=this;this.containerDropdownElement=document.createElement("div"),this.containerDropdownElement.className="vjs-quality-dropdown";var n=document.createElement("div");n.className="vjs-quality-container";var o=document.createElement("button");o.className="vjs-brand-quality-link",o.onclick=function(e){return t.onToggleDropdown(e)},o.innerText="Quality";var r=document.createElement("ul");e.formats||(e.formats=[{code:"auto",name:"Auto"}]),e.onFormatSelected&&(this.callback=e.onFormatSelected),e.sources&&(this.sources=e.sources),e.defaultFormat&&(this.defaultFormat=e.defaultFormat),e.formats.map(function(e){var n=document.createElement("li");n.dataset.code=e.code,e.code===t.defaultFormat&&(n.setAttribute("class","current"),o.innerText=e.name);var a=document.createElement("a");a.innerText=e.name,a.setAttribute("href","#"),a.addEventListener("click",function(n){n.preventDefault(),t.onQualitySelect(e)}),n.appendChild(a),r.appendChild(n)}),this.containerDropdownElement.appendChild(r),n.appendChild(this.containerDropdownElement),n.appendChild(o);var a=this.player.controlBar.fullscreenToggle.el();this.player.controlBar.el().insertBefore(n,a),this.player.addClass("vjs-qualityselector"),this.defaultFormat&&this.setPlayerSource()}}]),e}(),s=function(e){var t=this;this.ready(function(){var n=new l(t);n.onPlayerReady(i.default.mergeOptions(n.defaults,e))})};(i.default.registerPlugin||i.default.plugin)("qualityselector",s),s.VERSION="0.0.5",n.default=s,t.exports=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});